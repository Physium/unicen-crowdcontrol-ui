<script type="text/javascript">


$.get('singleresults.json', function(result) {
    console.log(result.length);
    if (result.length > 0) {

        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('number', 'Percentile');
            for (var i = 0; i < result.length; i++) {
                data.addColumn('number', 'Job ID ' + result[i]['jobId']);
            }


            //obtain all results
            var output = [];
            for (var i = 0; i < JSON.parse(result[0]['result'])['results'].length; i++) {
                var arr = [];
                arr.push((i + 1) * 5);
                for (var j = 0; j < result.length; j++) {
                    arr.push(JSON.parse(result[j]['result'])['results'][i]);
                }

                output.push(arr);
            }

            data.addRows(output);

            //data.addColumn('number', 'Simulation ID');
            /*var output = [];
            //console.log(result);
            for (var i = 0; i < result.length; i++) {
                //console.log(result['results'][i]);
                var arr = [];
                //console.log(result);
                arr.push(i + 1);
                arr.push(result['results'][i]);
                //console.log(arr);
                output.push(arr);
            }
            data.addRows(output);*/

            var options = {
                title: 'Evacuation Time of Crowd',
                vAxis: {
                    title: 'Evacuation Time (sec)',

                },
                hAxis: {
                    title: 'Percentile'
                },
                chartArea: {
                    width: '50%'
                }
            };

            var chart = new google.visualization.LineChart(document.getElementById('simulationEvacuationChart'));

            chart.draw(data, options);
        }
    } else {
        $("#simulationEvacuationChart").append("<h1>No past simulations</h1>");
    }
});
</script>
<div id="simulationEvacuationChart" style="height:400px"></div>
